---
title: "Memory-Mapped IO in Linux-Based Systems"
layout: single
categories: [임베디드 시스템 설계]
use_math: true
---
<style>
.crossline {
    border-bottom: 1.5px solid #6f777d;
}

.highlight1 {
    background-color: #ededed;
    color: #797c7e;
}

.center {
        text-align: center;
      }

.center img{
	width: 400px;
}

.left {
    text-align: left;
}

.left img{
    max-width: 70%
}

a {
  text-decoration-line: none;
/*   text-decoration-line: underline; */
/*   text-decoration-line: overline; */
/*   text-decoration-line: line-through; */
/*   text-decoration-line: underline line-through overline; */
}

.git {
    padding-top: 50px;
    padding-bottom: 10px;
}

</style>



### Memory-Mapped IO 란?

<p>
Memory-Mapped IO는 CPU가 입출력 장치를 액세스할 때, 입출력과 메모리를 별도의 주소 공간으로 구분하지 않고, 하나의 통합된 메모리 공간에 함께 배치하여 처리하는 방식이다.  
</p>
<br/>

### 동작원리

<p>de1-soc board는 <b>Hard Processor System(HPS)</b>과 <b>FPGA</b>로 이로어진 heterogeneous multiprocessor system이다. HPS는 변경이 불가능한 부분이고, FPGA는 변경 가능한 부분이다. HPS와 FPGA는 Figure1, 2과 같이 <span class="highlight1">Bridges</span>를 통해 연결되어 있다.</p>

<div class="center">
<img src="https://1drv.ms/i/c/ce3c26eef978e16d/IQM2n6wFSFlbQ6Wtog3gKspHAW0oXrGojj1iBD0GilDKGmo?width=777&height=554" alt="Example Image" />
<br/>
Figure1. FPGA Bridges
</div>

<div class="center">
<img src="https://1drv.ms/i/c/ce3c26eef978e16d/IQO5PTBZbEAjQJSvHRYMAYyoASduEwZkFC8zNzA-9nsCXkA?width=1024" alt="Example Image" />
<br/>
Figure2. Bridges 세부그림
</div>

### Memory map
<p>
이번 LAB에서 사용할 bridge는 <span class="highlight1">Lightweight HPS-to-FPGA Bridge</span> 이다. HPS에서 IO device들이 있는 FPGA에 접근하기 위해서는 Lightweight HPS-to-FPGA Bridge 의 base address에 각각의 peripheral의 base address를 더해줘야 한다.
</p>

Target address = LW_BRIDGE_BASE + (예를 들면)LEDR_BASE
{: .notice--info}